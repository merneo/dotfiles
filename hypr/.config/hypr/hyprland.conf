autogenerated = 0

################
### MONITORS ###
################

# Configure monitor layout and resolution.
# 'preferred,auto,auto' automatically detects the resolution and position.
# This is ideal for dynamic setups (e.g., laptops docking/undocking).
monitor=,preferred,auto,auto

# Workspace binding to specific monitors.
# This ensures a consistent workflow where workspaces 1-5 are always on the laptop screen (eDP-1)
# and workspaces 6-10 are on the external monitor (HDMI-A-1) when connected.
workspace = 1, monitor:eDP-1, default:true
workspace = 2, monitor:eDP-1
workspace = 3, monitor:eDP-1
workspace = 4, monitor:eDP-1
workspace = 5, monitor:eDP-1
workspace = 6, monitor:HDMI-A-1, default:true
workspace = 7, monitor:HDMI-A-1
workspace = 8, monitor:HDMI-A-1
workspace = 9, monitor:HDMI-A-1
workspace = 10, monitor:HDMI-A-1

###################
### MY PROGRAMS ###
###################

# Define preferred applications for easy maintenance.
$terminal = kitty
$fileManager = dolphin
# 'albert toggle' allows the launcher to be opened and closed with the same keybind.
$menu = albert toggle

#################
### AUTOSTART ###
#################

# Essential services started on login.
# exec-once ensures these run only once, preventing duplicate instances on config reload.

exec-once = waybar                                          # Status bar
exec-once = swayosd-server --style ~/.config/swayosd/style.css # On-screen display (volume/brightness)
exec-once = mako                                            # Notification daemon
exec-once = sleep 1 && albert                               # Application launcher (delayed to ensure tray availability)
exec-once = sleep 2 && ~/.local/bin/wallpaper-rotate.sh     # Wallpaper management

# Dynamic Wallpaper Rotation
# Listens to Hyprland's socket for monitor connection events.
# When a new monitor is added, it triggers the wallpaper rotation script to ensure
# the new display gets a wallpaper immediately.
exec-once = socat -U - UNIX-CONNECT:$XDG_RUNTIME_DIR/hypr/$HYPRLAND_INSTANCE_SIGNATURE/.socket2.sock | while read -r line; do [[ "$line" == "monitoradded"* ]] && sleep 1 && ~/.local/bin/wallpaper-rotate.sh; done

#############################
### ENVIRONMENT VARIABLES ###
#############################

# Set cursor size for consistency across Wayland and XWayland apps.
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# Localization settings.
env = LANG,en_US.UTF-8
env = LC_ALL,en_US.UTF-8

#####################
### LOOK AND FEEL ###
#####################

general {
    # Gaps between windows and screen edges.
    gaps_in = 11
    gaps_out = 11

    # Border width and colors.
    border_size = 2
    col.active_border = rgba(a6e3a1ff)  # Catppuccin Mocha Green - Active window
    col.inactive_border = rgba(1e1e2eff) # Dark base color - Inactive window

    # Prevent resizing by dragging borders (use keybinds instead for precision).
    resize_on_border = false

    # Tearing is generally undesirable for desktop usage; keep disabled.
    allow_tearing = false

    # Dwindle layout provides a dynamic, automatic tiling arrangement.
    layout = dwindle
}

decoration {
    # Rounding is dynamically controlled by 'hyprland-rounded.sh' and 'hyprland-corner.sh'.
    # Default is 0 (Sharp corners) or 12 (Rounded), depending on the active mode.
    rounding = 0
    rounding_power = 3

    # Opacity settings (1.0 = opaque).
    active_opacity = 1.0
    inactive_opacity = 1.0

    # Drop shadows adds depth but can be performance-intensive.
    # Disabled by default for performance; toggled via 'effects-toggle.sh'.
    shadow {
        enabled = no
        range = 4
        render_power = 3
        color = rgba(11111bee)
    }

    # Blur effect for transparent windows (e.g., terminal, waybar).
    # Disabled by default; toggled via 'effects-toggle.sh'.
    blur {
        enabled = no
        size = 10
        passes = 2
        vibrancy = 0.3 # Increases saturation of blurred background
    }
}

animations {
    # Animation state is dynamically controlled by mode scripts.
    # Rounded Mode enables them; Corner Mode disables them.
    enabled = no

    # Bezier curves for natural-feeling ease-in/out transitions.
    bezier = ios,            0.25, 0.1,  0.25, 1
    bezier = iosOut,         0.16, 1,    0.3,  1
    bezier = smooth,         0.4,  0,    0.2,  1

    # Animation definitions mapping events to curves and speeds.
    animation = global,        1,     6,     default
    animation = border,        1,     10,    ios
    animation = windows,       1,     7,     ios,     slide
    animation = windowsIn,     1,     7,     ios,     slide
    animation = windowsOut,    1,     5,     iosOut,  slide
    animation = fadeIn,        1,     8,     ios
    animation = fadeOut,       1,     6,     smooth
    animation = fade,          1,     8,     ios
    animation = layers,        1,     8,     ios,     slide
    animation = layersIn,      1,     8,     ios,     slide
    animation = layersOut,     1,     6,     smooth,  slide
    animation = fadeLayersIn,  1,     8,     ios
    animation = fadeLayersOut, 1,     6,     smooth
    animation = workspaces,    1,     6,     ios,     slide
    animation = workspacesIn,  1,     6,     ios,     slide
    animation = workspacesOut, 1,     5,     smooth,  slide
    animation = zoomFactor,    1,     8,     ios
}

dwindle {
    # Enable pseudotiling. Allows windows to keep their original size/ratio
    # while still being part of the tiling layout (toggle with Super+P).
    pseudotile = true
    
    # Preserve split direction when removing windows (keeps layout stable).
    preserve_split = true
}

master {
    # Configuration for the alternative 'master' layout (not currently used).
    new_status = master
}

misc {
    # Disable the default anime mascot wallpaper.
    force_default_wallpaper = -1
    disable_hyprland_logo = false
}

xwayland {
    # Prevents pixelated scaling of X11 apps on HiDPI screens.
    force_zero_scaling = true
}

#############
### INPUT ###
#############

input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.

    touchpad {
        natural_scroll = false
    }
}

# Swipe gesture for switching workspaces (3 fingers).
gesture = 3, horizontal, workspace

# Device-specific overrides (e.g., for a specific mouse).
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

###################
### KEYBINDINGS ###
###################

$mainMod = SUPER

# Core Applications
bind = $mainMod, Q, exec, $terminal      # Launch Terminal (Kitty)
bind = $mainMod, E, exec, $fileManager   # Launch File Manager (Dolphin)
bind = $mainMod, R, exec, $menu          # Launch Application Launcher (Albert)
bind = ALT, Space, exec, albert toggle   # Alternative Launcher Bind (Mac/Spotlight style)

# Window Management
bind = $mainMod, C, killactive,          # Close active window
bind = $mainMod, M, exit,                # Exit Hyprland
bind = $mainMod, V, togglefloating,      # Toggle floating state
bind = , F11, fullscreen,                # Toggle fullscreen
bind = $mainMod, P, pseudo,              # Toggle pseudotiling

# Screenshots
# Standard: Saves to Home directory with timestamp.
bind = $mainMod, S, exec, grim ~/screenshot-$(date +%Y%m%d-%H%M%S).png && notify-send "Screenshot saved"
# Mode: Prepares clean environment (static time, etc.) for screenshots.
bind = $mainMod SHIFT, S, exec, ~/.local/bin/screenshot-mode.sh
bind = $mainMod SHIFT, F, exec, ~/.local/bin/screenshot-mode-exit.sh

# Custom Scripts / Modes
bind = $mainMod SHIFT, E, exec, ~/.local/bin/effects-toggle.sh      # Toggle Blur/Shadows
bind = $mainMod SHIFT, R, exec, ~/.local/bin/hyprland-rounded.sh    # Switch to Rounded Mode (12px)
bind = $mainMod SHIFT, C, exec, ~/.local/bin/hyprland-corner.sh     # Switch to Corner Mode (0px)
bind = $mainMod SHIFT, W, exec, ~/.local/bin/wallpaper-change.sh    # Cycle Wallpapers
# Duplicate bindings for convenience (Ctrl variant)
bind = $mainMod CTRL, C, exec, ~/.local/bin/hyprland-corner.sh
bind = $mainMod CTRL, R, exec, ~/.local/bin/hyprland-rounded.sh

# Focus Navigation (Vim-style)
bind = $mainMod, h, movefocus, l
bind = $mainMod, j, movefocus, d
bind = $mainMod, k, movefocus, u
bind = $mainMod, l, movefocus, r
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Monitor Navigation
bind = $mainMod, O, focusmonitor, +1       # Move focus to next monitor
bind = $mainMod SHIFT, O, movewindow, mon:+1 # Move window to next monitor

# Workspace Navigation
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move Window to Workspace
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Move Window within Workspace (Vim-style)
bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, j, movewindow, d
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, l, movewindow, r

# Special Workspace (Scratchpad)
bind = $mainMod, A, togglespecialworkspace, magic
bind = $mainMod SHIFT, A, movetoworkspace, special:magic

# Mouse Control
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Media & Hardware Keys (via SwayOSD)
bindel = ,XF86AudioRaiseVolume, exec, swayosd-client --output-volume raise
bindel = ,XF86AudioLowerVolume, exec, swayosd-client --output-volume lower
bindel = ,XF86AudioMute, exec, swayosd-client --output-volume mute-toggle
bindel = ,XF86AudioMicMute, exec, swayosd-client --input-volume mute-toggle
bindel = ,XF86MonBrightnessUp, exec, swayosd-client --brightness raise
bindel = ,XF86MonBrightnessDown, exec, swayosd-client --brightness lower

##############################
### WINDOWS AND WORKSPACES ###
##############################

# Ignore "maximize" events from apps (Hyprland handles tiling).
windowrule = suppressevent maximize, class:.*

# Layer Rules for Blur and Opacity
# Ensures consistent visuals for floating/overlay elements.
layerrule = blur, waybar
layerrule = ignorezero, waybar
layerrule = blur, wofi
layerrule = ignorezero, wofi
layerrule = blur, osd
layerrule = ignorezero, osd

# Initial window focus rule
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Authentication Agent
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1