# =============================================================================
# TMUX CONFIGURATION
# Author: merneo
# Theme: Catppuccin Mocha Green
# Goal: Persistent, multi-pane terminal environment with Vim-like navigation
#       and integrated clipboard.
# =============================================================================

# PREFIX KEYBINDING
# Sets the prefix key from the default 'Ctrl-b' to 'Ctrl-Space' for ergonomics.
# 'send-prefix' allows pressing Ctrl-Space twice to send Ctrl-Space to inner applications.
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# MOUSE SUPPORT
# Enables mouse interactions (scrolling, pane resizing, window switching) within Tmux.
set -g mouse on

# WINDOW/PANE INDEXING
# Starts numbering windows and panes from 1 instead of 0, which is more intuitive.
set -g base-index 1
setw -g pane-base-index 1

# VI MODE
# Enables Vim-like keybindings for copy mode and command prompt.
setw -g mode-keys vi

# PANE SPLITTING KEYBINDINGS
# 'v' for vertical split, 's' for horizontal split.
# 'M-v' (Alt-v) and 'M-s' (Alt-s) provide direct access without prefix.
bind v split-window -h
bind s split-window -v
bind -n M-v split-window -h
bind -n M-s split-window -v

# KILL PANE KEYBINDING
# 'M-q' (Alt-q) to quickly close a pane without confirmation.
bind -n M-q kill-pane

# UNBIND DEFAULT SPLIT KEYS
# Removes default keybindings for vertical/horizontal splits ('"' and '%') to avoid conflicts.
unbind '"'
unbind %

# WINDOW NAVIGATION KEYBINDINGS (Alt + Number)
# Allows direct switching to windows 1-9 without the Tmux prefix.
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9
bind -n M-0 select-window -t 0

# WINDOW CREATION AND CYCLE KEYBINDINGS
# 'M-c' (Alt-c) to create new window.
# 'M-n' (Alt-n) to go to next window, 'M-p' (Alt-p) for previous.
bind -n M-c new-window
bind -n M-n next-window
bind -n M-p previous-window

# PANE RESIZING KEYBINDINGS (Alt + Shift + H/J/K/L)
# Granular control over pane dimensions.
bind -n M-H resize-pane -L 5
bind -n M-J resize-pane -D 5
bind -n M-K resize-pane -U 5
bind -n M-L resize-pane -R 5

# COPY MODE KEYBINDING
# 'M-[' (Alt-[) to enter copy mode.
bind -n M-[ copy-mode

# PASTE KEYBINDING
# 'M-P' (Alt-P) to paste from Tmux buffer.
bind -n M-P paste-buffer

# CONFIG RELOAD
# 'r' (after prefix) to reload Tmux config and display a confirmation message.
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# WINDOW RENAMING
# Disables automatic renaming of windows for stable titles.
set-option -g allow-rename off

# TERMINAL COLORS
# Enables full 256-color support and true color (Tc) for rich terminal themes.
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# STATUS BAR CONFIGURATION (Bottom)
# Defines the position, styling, and content of the Tmux status bar.
set -g status-position bottom
set -g status-style 'bg=default fg=#cdd6f4' # Default status bar text color
set -g status-left ''                       # No content on the left
set -g status-right '#[fg=#a6e3a1] #(date +"%I:%M %p") ' # Right side shows Green time (Catppuccin Green)
set -g status-right-length 50               # Max length for right side
set -g status-left-length 20                # Max length for left side

# CURRENT WINDOW STATUS
# Styling for the currently active window in the status bar (Green accent).
setw -g window-status-current-style 'fg=#1e1e2e bg=#a6e3a1 bold'
setw -g window-status-current-format ' #I:#W#F ' # Format: Index:WindowNameFlags

# INACTIVE WINDOW STATUS
# Styling for inactive windows.
setw -g window-status-style 'fg=#bac2de bg=default'
setw -g window-status-format ' #I:#W#F '

setw -g window-status-separator ' '

# PANE BORDERS
# Default pane borders are muted; active pane border is highlighted in Green.
set -g pane-border-style 'fg=#45475a'
set -g pane-active-border-style 'fg=#a6e3a1 bold'

# PLUGINS
# TPM (Tmux Plugin Manager) for easy management of Tmux plugins.
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible' # Essential Tmux options
set -g @plugin 'christoomey/vim-tmux-navigator' # Seamless navigation between Vim and Tmux panes

# CLIPBOARD INTEGRATION (WAYLAND)
# Uses 'wl-copy' for copying to the system clipboard in Wayland environments.
set -s copy-command 'wl-copy'

# INITIALIZE TPM
# This line *must* be at the very bottom of the .tmux.conf file.
run '~/.tmux/plugins/tpm/tpm'